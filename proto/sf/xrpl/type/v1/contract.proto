syntax = "proto3";
package sf.xrpl.type.v1;

option go_package = "github.com/xrpl-commons/firehose-xrpl/pb/sf/xrpl/type/v1;pbxrpl";

import "sf/xrpl/type/v1/amount.proto";

// ContractCreate - Creates a smart contract
// Reference: https://xrpl.org/contractcreate.html
message ContractCreate {
  // (Optional) Contract bytecode (hex)
  string contract_code = 1;

  // (Optional) Hash of contract bytecode
  string contract_hash = 2;

  // (Optional) Function definitions
  repeated ContractFunction functions = 3;

  // (Optional) Instance parameter definitions
  repeated string instance_parameters = 4;

  // (Optional) Instance parameter values
  repeated string instance_parameter_values = 5;

  // (Optional) URI for contract metadata
  string uri = 6;
}

message ContractFunction {
  string name = 1;
  repeated string parameters = 2;
}

// ContractModify - Modifies a smart contract
// Reference: https://xrpl.org/contractmodify.html
message ContractModify {
  // (Optional) Contract account to modify
  string contract_account = 1;

  // (Optional) New owner
  string owner = 2;

  // (Optional) New contract bytecode (hex)
  string contract_code = 3;

  // (Optional) New contract hash
  string contract_hash = 4;

  // (Optional) Updated function definitions
  repeated ContractFunction functions = 5;

  // (Optional) Updated instance parameters
  repeated string instance_parameters = 6;

  // (Optional) Updated instance parameter values
  repeated string instance_parameter_values = 7;

  // (Optional) Updated URI
  string uri = 8;
}

// ContractDelete - Deletes a smart contract
// Reference: https://xrpl.org/contractdelete.html
message ContractDelete {
  // Contract account to delete
  string contract_account = 1;
}

// ContractClawback - Claws back funds from a contract
// Reference: https://xrpl.org/contractclawback.html
message ContractClawback {
  // (Optional) Contract account
  string contract_account = 1;

  // Amount to claw back
  Amount amount = 2;
}

// ContractUserDelete - Deletes user data from a contract
// Reference: https://xrpl.org/contractuserdelete.html
message ContractUserDelete {
  // Contract account
  string contract_account = 1;

  // Function to call for deletion
  string function_name = 2;

  // (Optional) Parameters
  repeated string parameters = 3;

  // Computation allowance
  uint64 computation_allowance = 4;
}

// ContractCall - Calls a smart contract function
// Reference: https://xrpl.org/contractcall.html
message ContractCall {
  // Contract account to call
  string contract_account = 1;

  // Function name to invoke
  string function_name = 2;

  // (Optional) Function parameters
  repeated string parameters = 3;

  // Computation allowance
  uint64 computation_allowance = 4;
}
